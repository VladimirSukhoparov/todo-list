(()=>{"use strict";const e=document.getElementById("list"),t=document.getElementById("create"),n=document.getElementById("even"),d=document.getElementById("uneven"),c=document.getElementById("last"),i=document.getElementById("first");let l=[];function s(t){const n=document.createElement("div");n.classList.add("item");const d=document.createElement("input");d.type="checkbox",d.checked=t.complete,d.addEventListener("click",(()=>{d.checked&&(n.classList.add("complete"),l=l.filter((e=>e.id!=t.id)),l.push(t),o(),n.remove(),e.append(n),d.disabled="true")})),t.complete&&(n.classList.add("complete"),d.disabled="true");const c=document.createElement("input");c.type="text",c.value=t.text,c.setAttribute("disabled","");const i=document.createElement("div");i.classList.add("actions");const s=document.createElement("button");return s.classList.add("remove-btn"),s.innerText="remove",i.append(s),n.append(d),n.append(c),n.append(i),d.addEventListener("change",(()=>{t.complete=d.checked,t.complete?n.classList.add("complete"):n.classList.remove("complete"),o()})),c.addEventListener("input",(()=>{t.text=c.value})),c.addEventListener("blur",(()=>{c.setAttribute("disabled",""),o()})),c.addEventListener("keypress",(function(e){"Enter"===e.key&&(c.setAttribute("disabled",""),o())})),s.addEventListener("click",(()=>{l=l.filter((e=>e.id!=t.id)),n.remove(),o()})),{item_el:n,input_el:c,btn_remove:s}}function o(){const e=JSON.stringify(l);localStorage.setItem("todos",e)}t.addEventListener("click",(function(){const t={id:(new Date).getTime(),text:"",complete:!1};l.unshift(t);const{item_el:n,input_el:d}=s(t);e.prepend(n),d.removeAttribute("disabled"),d.focus(),o()})),d.addEventListener("click",(()=>{for(let t=0;t<e.childNodes.length;t+=2)e.childNodes[t].classList.toggle("color")})),n.addEventListener("click",(()=>{for(let t=1;t<e.childNodes.length;t+=2)e.childNodes[t].classList.toggle("color")})),c.addEventListener("click",(()=>{let t=l.pop();l=l.filter((e=>e.id!=t.id)),o(),e.lastElementChild.remove()})),i.addEventListener("click",(()=>{let t=l.shift();l=l.filter((e=>e.id!=t.id)),o(),e.firstElementChild.remove()})),function(){e.innerHTML="",function(){const e=localStorage.getItem("todos");e&&(l=JSON.parse(e))}();for(let t=0;t<l.length;t++){const n=l[t],{item_el:d}=s(n);e.append(d)}}()})();