import"./style.css";const list=document.getElementById("list"),btn_create=document.getElementById("create"),btn_even=document.getElementById("even"),btn_uneven=document.getElementById("uneven"),btn_last=document.getElementById("last"),btn_first=document.getElementById("first");let todos=[];function CreateNewTodo(){const e={id:(new Date).getTime(),text:"",complete:!1};todos.unshift(e);const{item_el:t,input_el:o}=CreateTodoElement(e);list.prepend(t),o.removeAttribute("disabled"),o.focus(),Save()}function CreateTodoElement(e){const t=document.createElement("div");t.classList.add("item");const o=document.createElement("input");o.type="checkbox",o.checked=e.complete,o.addEventListener("click",(()=>{o.checked&&(t.classList.add("complete"),todos=todos.filter((t=>t.id!=e.id)),todos.push(e),Save(),t.remove(),list.append(t),o.disabled="true")})),e.complete&&(t.classList.add("complete"),o.disabled="true");const d=document.createElement("input");d.type="text",d.value=e.text,d.setAttribute("disabled","");const n=document.createElement("div");n.classList.add("actions");const s=document.createElement("button");return s.classList.add("remove-btn"),s.innerText="remove",n.append(s),t.append(o),t.append(d),t.append(n),o.addEventListener("change",(()=>{e.complete=o.checked,e.complete?t.classList.add("complete"):t.classList.remove("complete"),Save()})),d.addEventListener("input",(()=>{e.text=d.value})),d.addEventListener("blur",(()=>{d.setAttribute("disabled",""),Save()})),d.addEventListener("keypress",(function(e){"Enter"===e.key&&(d.setAttribute("disabled",""),Save())})),s.addEventListener("click",(()=>{todos=todos.filter((t=>t.id!=e.id)),t.remove(),Save()})),{item_el:t,input_el:d,btn_remove:s}}function DisplayTodos(){list.innerHTML="",Load();for(let e=0;e<todos.length;e++){const t=todos[e],{item_el:o}=CreateTodoElement(t);list.append(o)}}function Save(){const e=JSON.stringify(todos);localStorage.setItem("todos",e)}function Load(){const e=localStorage.getItem("todos");e&&(todos=JSON.parse(e))}btn_create.addEventListener("click",CreateNewTodo),btn_uneven.addEventListener("click",(()=>{for(let e=0;e<list.childNodes.length;e+=2)list.childNodes[e].classList.toggle("color")})),btn_even.addEventListener("click",(()=>{for(let e=1;e<list.childNodes.length;e+=2)list.childNodes[e].classList.toggle("color")})),btn_last.addEventListener("click",(()=>{let e=todos.pop();todos=todos.filter((t=>t.id!=e.id)),Save(),list.lastElementChild.remove()})),btn_first.addEventListener("click",(()=>{let e=todos.shift();todos=todos.filter((t=>t.id!=e.id)),Save(),list.firstElementChild.remove()})),DisplayTodos();